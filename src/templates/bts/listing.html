{% extends 'site/browse.html' %}
{% block page-title %}Przeglądarka bazy BTSearch{% endblock %}

{% block sidebar-content %}

<form action="" method="get">
{{ filter_form }}
{% comment %}
        <p>
            <strong>Sieć</strong><br />
            <select name="network" id="network-filter">
                <option value="-1">Wszystkie sieci</option>
                {% for network in networks %}
                <option value="{{ network.code }}">{{ network.name }}</option>
                {% endfor %}
            </select>
        </p>

        <div class="lt" style="width: 40%;">
            <strong>Standard</strong><br />
            {% for standard in standards %}
            <label class="checkbox">
                <input type="checkbox" id="standard-filter-{{ standard.0|lower }}" name="standard" class="standard-filter" value="{{ standard.0|lower }}" /> {{ standard.0 }}
            </label>
            {% endfor %}
        </div>

        <div class="lt">
            <strong>Pasmo</strong><br />
            {% for band in bands %}
            <label class="checkbox inline">
                <input type="checkbox" id="band-filter-{{ band.0 }}" name="band" class="band-filter" value="{{ band.0 }}" /> {{ band.0 }}
            </label>{% cycle '' '<br/>' %}
            {% endfor %}
        </div>
        <div class="cr"></div>

{% endcomment %}
        <input type="submit" value="Filtruj" />
</form>

{% endblock %}

{% block current-search-query %}{{ get_params.query }}{% endblock %}

{% block main-content %}

    {% if basestations %}

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Sieć</th>
                    <th>Województwo</th>
                    <th>Miejscowość</th>
                    <th>Adres</th>
                    <th>Standard / Pasmo</th>
                    <th>Ost. aktualizacja</th>
                </tr>
            </thead>
            <tbody>
            {% for basestation in basestations %}
                <tr>
                    <td>{{ basestation.network }}</td>
                    <td>{{ basestation.region_name }}</td>
                    <td>{{ basestation.town_name }}</td>
                    <td>{{ basestation.address_name }}</td>
                    <td>
                    {% for stdbnd in basestation.get_supported_standards_and_bands %}
                        {{ stdbnd.standard }}{{ stdbnd.band }}
                    {% endfor %}
                    </td>
                    <td>{{ basestation.date_updated|timesince }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {% if is_paginated %}
            {% include 'bts/partials/paginator.html' with page_obj=page_obj %}
        {% endif %}

    {% else %}

        <p>Brak rekordów spełniających kryteria wyszukiwania</p>

    {% endif %}

{% endblock %}
